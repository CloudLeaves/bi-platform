webpackJsonp([6],{245:function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={};e["default"]={set:function(n,e){t[n]=e},get:function(n){return t[n]},remove:function(n){delete t[n]}},n.exports=e["default"]},246:function(n,e,t){var i,o;t(247),i=t(250),i&&i.__esModule&&Object.keys(i).length>1&&console.warn("[vue-loader] app/asset/components/confirm.vue: named exports in *.vue files are ignored."),o=t(256),n.exports=i||{},n.exports.__esModule&&(n.exports=n.exports["default"]),o&&(("function"==typeof n.exports?n.exports.options||(n.exports.options={}):n.exports).template=o)},247:function(n,e,t){var i=t(248);"string"==typeof i&&(i=[[n.id,i,""]]);t(249)(i,{});i.locals&&(n.exports=i.locals)},248:function(n,e,t){e=n.exports=t(243)(),e.push([n.id,".modal-confirm {\n  margin-top: 0;\n}\n.modal-confirm-action {\n  text-align: right;\n}\n",""])},250:function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(e,"__esModule",{value:!0});var o=t(251),r=i(o);e["default"]={props:{title:{type:String,"default":"注意"}},data:function(){return{show:!1,msg:""}},methods:{confirm:function(){this.show=!1,this.$dispatch("confirm-ok")},cancel:function(){this.show=!1,this.$dispatch("confirm-cancel")}},watch:{show:function(n){this.$refs.alertModal.show=n,n||this.$dispatch("confirm-close")}},components:{modal:r["default"]},events:{"modal-close":function(){this.show=!1}}}},256:function(n,e){n.exports='\n<div>\n    <modal :title="title" v-ref:alert-modal>\n        <p class="modal-confirm">{{msg}}</p>\n        <div class="modal-confirm-action">\n            <input type="button" class="btn btn-default" value="取消" @click="cancel">\n            <input type="button" class="btn btn-primary" value="确定" @click="confirm">\n        </div>\n    </modal>\n</div>\n'},268:function(n,e,t){n.exports={"default":t(269),__esModule:!0}},269:function(n,e,t){t(270),t(297),n.exports=t(300)},270:function(n,e,t){t(271);var i=t(274);i.NodeList=i.HTMLCollection=i.Array},271:function(n,e,t){"use strict";var i=t(272),o=t(273),r=t(274),a=t(275);n.exports=t(279)(Array,"Array",function(n,e){this._t=a(n),this._i=0,this._k=e},function(){var n=this._t,e=this._k,t=this._i++;return!n||t>=n.length?(this._t=void 0,o(1)):"keys"==e?o(0,t):"values"==e?o(0,n[t]):o(0,[t,n[t]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},272:function(n,e){n.exports=function(){}},273:function(n,e){n.exports=function(n,e){return{value:e,done:!!n}}},274:function(n,e){n.exports={}},275:function(n,e,t){var i=t(276),o=t(278);n.exports=function(n){return i(o(n))}},276:function(n,e,t){var i=t(277);n.exports=Object("z").propertyIsEnumerable(0)?Object:function(n){return"String"==i(n)?n.split(""):Object(n)}},277:function(n,e){var t={}.toString;n.exports=function(n){return t.call(n).slice(8,-1)}},278:function(n,e){n.exports=function(n){if(void 0==n)throw TypeError("Can't call method on  "+n);return n}},279:function(n,e,t){"use strict";var i=t(280),o=t(281),r=t(285),a=t(286),l=t(291),c=t(274),d=t(292),u=t(293),s=t(287).getProto,f=t(294)("iterator"),m=!([].keys&&"next"in[].keys()),p="@@iterator",h="keys",b="values",g=function(){return this};n.exports=function(n,e,t,v,y,x,k){d(t,e,v);var w,T,D=function(n){if(!m&&n in O)return O[n];switch(n){case h:return function(){return new t(this,n)};case b:return function(){return new t(this,n)}}return function(){return new t(this,n)}},I=e+" Iterator",_=y==b,M=!1,O=n.prototype,E=O[f]||O[p]||y&&O[y],j=E||D(y);if(E){var P=s(j.call(new n));u(P,I,!0),!i&&l(O,p)&&a(P,f,g),_&&E.name!==b&&(M=!0,j=function(){return E.call(this)})}if(i&&!k||!m&&!M&&O[f]||a(O,f,j),c[e]=j,c[I]=g,y)if(w={values:_?j:D(b),keys:x?j:D(h),entries:_?D("entries"):j},k)for(T in w)T in O||r(O,T,w[T]);else o(o.P+o.F*(m||M),e,w);return w}},280:function(n,e){n.exports=!0},281:function(n,e,t){var i=t(282),o=t(232),r=t(283),a="prototype",l=function(n,e,t){var c,d,u,s=n&l.F,f=n&l.G,m=n&l.S,p=n&l.P,h=n&l.B,b=n&l.W,g=f?o:o[e]||(o[e]={}),v=f?i:m?i[e]:(i[e]||{})[a];f&&(t=e);for(c in t)d=!s&&v&&c in v,d&&c in g||(u=d?v[c]:t[c],g[c]=f&&"function"!=typeof v[c]?t[c]:h&&d?r(u,i):b&&v[c]==u?function(n){var e=function(e){return this instanceof n?new n(e):n(e)};return e[a]=n[a],e}(u):p&&"function"==typeof u?r(Function.call,u):u,p&&((g[a]||(g[a]={}))[c]=u))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,n.exports=l},282:function(n,e){var t=n.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},283:function(n,e,t){var i=t(284);n.exports=function(n,e,t){if(i(n),void 0===e)return n;switch(t){case 1:return function(t){return n.call(e,t)};case 2:return function(t,i){return n.call(e,t,i)};case 3:return function(t,i,o){return n.call(e,t,i,o)}}return function(){return n.apply(e,arguments)}}},284:function(n,e){n.exports=function(n){if("function"!=typeof n)throw TypeError(n+" is not a function!");return n}},285:function(n,e,t){n.exports=t(286)},286:function(n,e,t){var i=t(287),o=t(288);n.exports=t(289)?function(n,e,t){return i.setDesc(n,e,o(1,t))}:function(n,e,t){return n[e]=t,n}},287:function(n,e){var t=Object;n.exports={create:t.create,getProto:t.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:t.getOwnPropertyDescriptor,setDesc:t.defineProperty,setDescs:t.defineProperties,getKeys:t.keys,getNames:t.getOwnPropertyNames,getSymbols:t.getOwnPropertySymbols,each:[].forEach}},288:function(n,e){n.exports=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}},289:function(n,e,t){n.exports=!t(290)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},290:function(n,e){n.exports=function(n){try{return!!n()}catch(e){return!0}}},291:function(n,e){var t={}.hasOwnProperty;n.exports=function(n,e){return t.call(n,e)}},292:function(n,e,t){"use strict";var i=t(287),o=t(288),r=t(293),a={};t(286)(a,t(294)("iterator"),function(){return this}),n.exports=function(n,e,t){n.prototype=i.create(a,{next:o(1,t)}),r(n,e+" Iterator")}},293:function(n,e,t){var i=t(287).setDesc,o=t(291),r=t(294)("toStringTag");n.exports=function(n,e,t){n&&!o(n=t?n:n.prototype,r)&&i(n,r,{configurable:!0,value:e})}},294:function(n,e,t){var i=t(295)("wks"),o=t(296),r=t(282).Symbol;n.exports=function(n){return i[n]||(i[n]=r&&r[n]||(r||o)("Symbol."+n))}},295:function(n,e,t){var i=t(282),o="__core-js_shared__",r=i[o]||(i[o]={});n.exports=function(n){return r[n]||(r[n]={})}},296:function(n,e){var t=0,i=Math.random();n.exports=function(n){return"Symbol(".concat(void 0===n?"":n,")_",(++t+i).toString(36))}},297:function(n,e,t){"use strict";var i=t(298)(!0);t(279)(String,"String",function(n){this._t=String(n),this._i=0},function(){var n,e=this._t,t=this._i;return t>=e.length?{value:void 0,done:!0}:(n=i(e,t),this._i+=n.length,{value:n,done:!1})})},298:function(n,e,t){var i=t(299),o=t(278);n.exports=function(n){return function(e,t){var r,a,l=String(o(e)),c=i(t),d=l.length;return 0>c||c>=d?n?"":void 0:(r=l.charCodeAt(c),55296>r||r>56319||c+1===d||(a=l.charCodeAt(c+1))<56320||a>57343?n?l.charAt(c):r:n?l.slice(c,c+2):(r-55296<<10)+(a-56320)+65536)}}},299:function(n,e){var t=Math.ceil,i=Math.floor;n.exports=function(n){return isNaN(n=+n)?0:(n>0?i:t)(n)}},300:function(n,e,t){var i=t(301),o=t(303);n.exports=t(232).getIterator=function(n){var e=o(n);if("function"!=typeof e)throw TypeError(n+" is not iterable!");return i(e.call(n))}},301:function(n,e,t){var i=t(302);n.exports=function(n){if(!i(n))throw TypeError(n+" is not an object!");return n}},302:function(n,e){n.exports=function(n){return"object"==typeof n?null!==n:"function"==typeof n}},303:function(n,e,t){var i=t(304),o=t(294)("iterator"),r=t(274);n.exports=t(232).getIteratorMethod=function(n){return void 0!=n?n[o]||n["@@iterator"]||r[i(n)]:void 0}},304:function(n,e,t){var i=t(277),o=t(294)("toStringTag"),r="Arguments"==i(function(){return arguments}());n.exports=function(n){var e,t,a;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=(e=Object(n))[o])?t:r?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},335:function(n,e,t){n.exports={"default":t(336),__esModule:!0}},336:function(n,e,t){t(337),n.exports=t(232).Object.keys},337:function(n,e,t){var i=t(338);t(339)("keys",function(n){return function(e){return n(i(e))}})},338:function(n,e,t){var i=t(278);n.exports=function(n){return Object(i(n))}},339:function(n,e,t){var i=t(281),o=t(232),r=t(290);n.exports=function(n,e){var t=(o.Object||{})[n]||Object[n],a={};a[n]=e(t),i(i.S+i.F*r(function(){t(1)}),"Object",a)}},343:function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}function o(n,e){var t="";return n.some(function(i,o){var r=m["default"].getErrorInfoList(i,e);return 1===n.length&&r.length===h["default"].checkItems[e].length?(t="",!1):1===n.length&&r.length===h["default"].checkItems[e].length-1&&"callback"===e&&3!==+i.refreshType?(t="",!1):(t=r.length?"第"+(o+1)+h["default"].errorInfo.callback.unit+r.join(","):"",r.length)}),t}function r(){var n=!0,e=!1,t=void 0;try{for(var i,r=(0,d["default"])((0,l["default"])(this.dimInfo.dim));!(n=(i=r.next()).done);n=!0){var a=i.value,c=!0,u=!1,s=void 0;try{for(var f,m=(0,d["default"])(this.dimInfo.dim[a]);!(c=(f=m.next()).done);c=!0){var p=f.value,h=o(p.children,a);if(h)return p.errorInfo=h,{dimName:a,hasError:!0}}}catch(b){u=!0,s=b}finally{try{!c&&m["return"]&&m["return"]()}finally{if(u)throw s}}}}catch(b){e=!0,t=b}finally{try{!n&&r["return"]&&r["return"]()}finally{if(e)throw t}}return{hasError:!1}}Object.defineProperty(e,"__esModule",{value:!0});var a=t(335),l=i(a),c=t(268),d=i(c),u=t(344),s=i(u),f=t(345),m=i(f),p=t(346),h=i(p),b=t(245),g=i(b),v=t(347),y=i(v),x=t(348),k=i(x),w=t(352),T=i(w),D=t(356),I=i(D);t(360),e["default"]={template:y["default"],data:function(){return{id:this.$route.params.id,status:0,currentDimID:"normal",dimList:[{id:"normal",text:"普通维度"},{id:"date",text:"时间维度"},{id:"callback",text:"回调维度"}],dimInfo:{}}},created:function(){var n=this;s["default"].getDimConfig(this.id).then(function(e){return n.dimInfo=e}).then(function(){return n.status=1},function(){return n.status=2})},methods:{confirm:function(){var n=this,e=r.call(this),t=e.hasError,i=e.dimName;return t?void(this.currentDimID=i):void s["default"].saveDimConfig(this.$route.params.id,m["default"].processData(this.dimInfo.dim)).then(function(){g["default"].set("isEdit"+n.$route.params.id,!0),n.$route.router.go("/list/"+n.$route.params.id+"/edit")})},cancel:function(){this.$route.router.go("/list/")}},components:{normal:k["default"],date:T["default"],callback:I["default"]}},n.exports=e["default"]},344:function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}function o(n){n.relationTableDims={};var e={},t=!0,i=!1,o=void 0;try{for(var r,a=(0,f["default"])((0,u["default"])(n.cubes));!(t=(r=a.next()).done);t=!0){var l=r.value;e[n.cubes[l].name]=1}}catch(c){i=!0,o=c}finally{try{!t&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n.relationTables=n.relationTables.reduce(function(e,t){return e.nowCubeTables[t.id]?e:(n.relationTableDims[t.id]=t.fields,delete t.fields,e.result.push(t),e)},{nowCubeTables:e,result:[]}).result,n}function r(n){n.relationTables=n.relationTables.map(function(n){return n.belong=null,n});var e=!0,t=!1,i=void 0;try{for(var o,r=(0,f["default"])((0,u["default"])(n.dim));!(e=(o=r.next()).done);e=!0){var a=o.value;n.dim[a].forEach(function(e){var t=e.cubeId;n.cubes[t].currDims=n.cubes[t].currDims.map(function(n){return n.belong=null,n}),e.children.length&&e.children.forEach(function(e){n.cubes[t].currDims=n.cubes[t].currDims.map(function(n){var t=e.currDim===n.id?e.guid:null;return n.belong=n.belong||t,n}),n.relationTables=n.relationTables.map(function(n){var t=e.relationTable===n.id?e.guid:null;return n.belong=n.belong||t,n})})})}}catch(l){t=!0,i=l}finally{try{!e&&r["return"]&&r["return"]()}finally{if(t)throw i}}return n}function a(n){delete n.dim.custom,delete n.dateRelationTables;var e=!0,t=!1,i=void 0;try{for(var a,l=(0,f["default"])((0,u["default"])(n.cubes));!(e=(a=l.next()).done);e=!0){var c=a.value;delete n.cubes[c].allFields}}catch(d){t=!0,i=d}finally{try{!e&&l["return"]&&l["return"]()}finally{if(t)throw i}}n=o(n);var s=!0,m=!1,p=void 0;try{for(var h,g=function(){var e=h.value;n.dim[e].forEach(function(n){n.errorInfo="",n.children.forEach(function(n){var t=!0,i=!1,o=void 0;try{for(var r,a=(0,f["default"])((0,u["default"])(n));!(t=(r=a.next()).done);t=!0){var l=r.value;n[l]="number"==typeof n[l]?""+n[l]:n[l]}}catch(c){i=!0,o=c}finally{try{!t&&a["return"]&&a["return"]()}finally{if(i)throw o}}n.guid=b["default"].getGuid(),"callback"===e&&(n.interval=3===+n.refreshType?n.interval:""),delete n.dateLevel})})},v=(0,f["default"])((0,u["default"])(n.dim));!(s=(h=v.next()).done);s=!0)g()}catch(d){m=!0,p=d}finally{try{!s&&v["return"]&&v["return"]()}finally{if(m)throw p}}return n=r(n),b["default"].getDefaults(n)}Object.defineProperty(e,"__esModule",{value:!0});var l=t(230),c=i(l),d=t(335),u=i(d),s=t(268),f=i(s),m=t(36),p=i(m),h=t(345),b=i(h);e["default"]={getDimConfig:function(n){var e=new p["default"].Deferred;return p["default"].requestGET("reports/"+n+"/dim_config").then(function(n){e.resolve(a(n.data))},function(){e.reject()}),e.promise()},saveDimConfig:function(n,e){var t=!0,i=!1,o=void 0;try{for(var r,a=function(){var n=r.value;e[n].forEach(function(e){delete e.errorInfo,e.children.forEach(function(e){delete e.guid,"callback"===n&&3!==+e.refreshType&&delete e.interval})})},l=(0,f["default"])((0,u["default"])(e));!(t=(r=l.next()).done);t=!0)a()}catch(d){i=!0,o=d}finally{try{!t&&l["return"]&&l["return"]()}finally{if(i)throw o}}e.custom=e.normal.map(function(n){return{cubeId:n.cubeId,children:[]}});var s=!0,m=!1,h=void 0;try{for(var b,g=(0,f["default"])((0,u["default"])(e));!(s=(b=g.next()).done);s=!0){var v=b.value;e[v]=(0,c["default"])(e[v])}}catch(d){m=!0,h=d}finally{try{!s&&g["return"]&&g["return"]()}finally{if(m)throw h}}return p["default"].requestPOST("reports/"+n+"/dim_config",e)}},n.exports=e["default"]},345:function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(e,"__esModule",{value:!0});var o=t(335),r=i(o),a=t(268),l=i(a),c=t(346),d=i(c),u=t(36),s=i(u);e["default"]={getDefaults:function(n){var e=this,t=!0,i=!1,o=void 0;try{for(var a,c=function(){var t=a.value;n.dim[t]=n.dim[t].map(function(i){return"normal"===t&&(i.children=i.children.length?i.children:[{currDim:"-1",field:"-1",relationTable:"-1",guid:e.getGuid()}],i.children=i.children.map(function(e){return e.fields=n.relationTableDims[e.relationTable]||[],e})),"date"===t&&(i.children=i.children.length?i.children:[{currDim:"-1",field:"-1",format:"-1",guid:e.getGuid(),relationTable:"-1"}],i.children=i.children.map(function(n){return n.formats=d["default"].date.format[n.field]||[],n})),"callback"===t&&(i.children=i.children.length?i.children:[{address:"",currDim:"-1",guid:e.getGuid(),interval:"",refreshType:"1"}]),i.name=n.cubes[i.cubeId].name,i.open=!0,i.errorInfo="",i})},u=(0,l["default"])((0,r["default"])(n.dim));!(t=(a=u.next()).done);t=!0)c()}catch(s){i=!0,o=s}finally{try{!t&&u["return"]&&u["return"]()}finally{if(i)throw o}}return n},getGuid:function(){for(var n=+new Date,e=[],t="0123456789ABCDEF",i=0;8>i;i++)e.push(t.charAt(16*Math.random()));var o=e.join("");return n+"_"+o},processData:function(n,e){n=s["default"].extend(!0,{},n);var t=!0,i=!1,o=void 0;try{for(var a,c=(0,l["default"])((0,r["default"])(n));!(t=(a=c.next()).done);t=!0){var d=a.value;n[d].forEach(function(n){delete n.name,delete n.open,n.children.forEach(function(n){delete n.cubes,delete n.fields,delete n.relationTables,delete n.formats,"callback"===e&&(n.interval=3===+n.refreshType?n.interval:"")}),"-1"===n.children[0].currDim&&n.children.shift()})}}catch(u){i=!0,o=u}finally{try{!t&&c["return"]&&c["return"]()}finally{if(i)throw o}}return n},getErrorInfoList:function(n,e){var t=[],i=d["default"].checkItems[e];return i.forEach(function(i){i.require&&n[i.require.name]!==i.require.value||("-1"===n[i.name]||""===n[i.name])&&t.push(d["default"].errorInfo[e][i.name])}),t}},n.exports=e["default"]},346:function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={errorInfo:{normal:{unit:"行",currDim:"请选择主数据表",relationTable:"请选择关联数据表",field:"请选择关联表字段"},callback:{unit:"模块",currDim:"请选择回调字段",address:"请填写正确格式的回调地址",interval:"请填写正确格式的时间间隔"},date:{unit:"行",relationTable:"请选择被关联表",currDim:"请选择时间字段",field:"请选择粒度",format:"请选择时间格式"}},checkItems:{normal:[{name:"currDim"},{name:"relationTable"},{name:"field"}],callback:[{name:"currDim"},{name:"address"},{name:"interval",require:{name:"refreshType",value:"3"}}],date:[{name:"relationTable"},{name:"currDim"},{name:"field"},{name:"format"}]},date:{relationTables:[{value:"ownertable",name:"内置表"}],granularity:[{value:"TimeYear",name:"年"},{value:"TimeQuarter",name:"季"},{value:"TimeMonth",name:"月"},{value:"TimeWeekly",name:"周"},{value:"TimeDay",name:"日"}],format:{TimeYear:[{value:"yyyy",name:"yyyy"}],TimeQuarter:[{value:"yyyy-QQ",name:"yyyy-QQ"},{value:"yyyy/QQ",name:"yyyy/QQ"}],TimeMonth:[{value:"yyyy-MM",name:"yyyy-MM"},{value:"yyyy/MM",name:"yyyy/MM"}],TimeWeekly:[{value:"yyyy-W",name:"yyyy-W"},{value:"yyyy/W",name:"yyyy/W"}],TimeDay:[{value:"yyyy-MM-dd",name:"yyyy-MM-dd"},{value:"yyyy/MM/dd",name:"yyyy/MM/dd"}]}}},n.exports=e["default"]},347:function(n,e){n.exports='<template v-if="status === 0">\n    加载中，请稍后\n</template>\n<div class="dim-config" v-if="status === 1">\n    <ul class="dim-config-type-list">\n        <li v-for="dim in dimList" class="list-item" :class="{active: dim.id === currentDimID}" @click="currentDimID = dim.id" track-by="id">{{dim.text}}</li>\n    </ul>\n    <div class="dim-config-setting-region">\n        <component :is="currentDimID" :dims="dimInfo.dim[currentDimID]" :relation-tables="dimInfo.relationTables" :cubes="dimInfo.cubes" :relation-table-dims="dimInfo.relationTableDims"></component>\n    </div>\n    <div class="dim-config-operate-btns">\n        <a class="btn btn-primary" v-link="{path: \'/list/\' + id + \'/selectDataSource\'}">返回重新选择数据表</a>\n        <input type="button" class="btn btn-default" @click="cancel" value="取消">\n        <input type="button" class="btn btn-primary" @click="confirm" value="确定">\n    </div>\n</div>\n<div v-if="status === 2">\n    <p>status:{{status}}，未能查到相关数据，请稍后重试！</p>\n</div>'},348:function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(e,"__esModule",{value:!0});var o=t(345),r=i(o),a=t(349),l=i(a),c=t(246),d=i(c);t(350),e["default"]={template:l["default"],props:["dims","relation-tables","cubes","relation-table-dims"],methods:{addItem:function(n){n.children.push({currDim:"-1",field:"-1",relationTable:"-1",guid:r["default"].getGuid(),fields:[]})},deleteItem:function(n,e){this.$refs.delChild.msg="确定要删除吗？",this.$refs.delChild.show=!0,this.needToDelete={dim:n,child:e}},changeCube:function(n,e){var t=e.find(function(e){return e.belong===n.guid});t&&(t.belong=null);var i=e.find(function(e){return e.name===n.currDim});i&&(i.belong=n.guid)},changeRelationTables:function(n){var e=this.relationTables.find(function(e){return e.belong===n.guid});e&&(e.belong=null);var t=this.relationTables.find(function(e){return e.name===n.relationTable});t&&(t.belong=n.guid),n.field=-1,n.fields=this.relationTableDims[n.relationTable]||[]}},components:{confirm:d["default"]},filters:{belong:function(n,e){return n.filter(function(n){return n.belong===e||null===n.belong})}},directives:{"can-add-new":{deep:!0,update:function(n){var e=n.currDims,t=n.relationTables,i=n.index,o=n.children;return i!==o.length-1?void(this.el.style.display="none"):t.every(function(n){return null!==n.belong})?void(this.el.style.display="none"):e.every(function(n){return null!==n.belong})?void(this.el.style.display="none"):void(this.el.style.display="")}}},events:{"confirm-ok":function(){var n=this.needToDelete,e=n.child,t=n.dim;delete this.needToDelete;var i=e.guid,o=this.cubes[t.cubeId].currDims.find(function(n){return n.belong===i});o&&(o.belong=null);var r=this.relationTables.find(function(n){return n.belong===i});return r&&(r.belong=null),t.children.length<2?(e.currDim=e.field=e.relationTable="-1",e.fields=[],!1):void t.children.$remove(e)}},beforeDestroy:function(){delete this.needToDelete}},n.exports=e["default"]},349:function(n,e){n.exports='<div class="normal-dim">\n    <ul class="normal-dim-config-item-caption">\n        <li>主数据表</li>\n        <li>主表字段</li>\n        <li>关联数据表</li>\n        <li>关联表字段</li>\n    </ul>\n    <div class="normal-dim-config-region">\n        <div class="dim-common-config-each-item" v-for="dim in dims">\n            <span class="dim-common-config-main-tab-name" :title="dim.name">{{dim.name}}</span>\n            <span\n                :class="{\n                    \'dim-common-config-cube-open\': dim.open,\n                    \'dim-common-config-cube-close\': !dim.open\n                }"\n                @click="dim.open = !dim.open"></span>\n            <div class="normal-dim-cube" v-show="dim.open">\n                <div v-for="child in dim.children" class="normal-dim-cube-item">\n                    <select class="dim-common-config-select" @change="changeCube(child, cubes[dim.cubeId].currDims)" v-model="child.currDim">\n                        <option value="-1">请选择</option>\n                        <option v-for="cube in cubes[dim.cubeId].currDims | belong child.guid" :value="cube.id">{{cube.comment}}</option>\n                    </select>\n                    <span class="normal-dim-equal">=</span>\n                    <select class="dim-common-config-select" v-model="child.relationTable" @change="changeRelationTables(child)">\n                        <option value="-1">请选择</option>\n                        <option v-for="table in relationTables | belong child.guid" :value="table.id">{{table.name}}</option>\n                    </select>\n                    <select class="dim-common-config-select" v-model="child.field">\n                        <option value="-1">请选择</option>\n                        <option v-for="field in child.fields" :value="field.id">{{field.comment}}</option>\n                    </select>\n                    <span class="normal-dim-delete" @click="deleteItem(dim, child, $remove)">-</span>\n                    <!-- TODO 需要自定义指令搞定这个 -->\n                    <span class="normal-dim-add" @click="addItem(dim)" v-can-add-new="{currDims: cubes[dim.cubeId].currDims, relationTables: relationTables, index: $index, children: dim.children}"\n                    >+</span>\n                </div>\n            </div>\n            <p class="dim-common-config-error" v-show="dim.errorInfo">{{dim.errorInfo}}</p>\n        </div>\n    </div>\n    <span class="normal-dim-prompt">注：建立关联后，默认将关联表的所有字段全部取出</span>\n    <confirm v-ref:del-child></confirm>\n</div>'},350:function(n,e,t){var i=t(351);"string"==typeof i&&(i=[[n.id,i,""]]);t(244)(i,{});i.locals&&(n.exports=i.locals)},351:function(n,e,t){e=n.exports=t(243)(),e.push([n.id,'.normal-dim-config-item-caption {\n  height: 25px;\n  line-height: 25px;\n  border-bottom: 2px solid #3398cc;\n}\n.normal-dim-config-item-caption li {\n  float: left;\n  width: 170px;\n  font-size: 12px;\n  font-weight: 700;\n  text-align: center;\n}\n.normal-dim-equal {\n  float: left;\n  margin: 0 15px 0 0;\n}\n.normal-dim-cube {\n  float: left;\n  width: 510px;\n  margin: 1px 0 0 0;\n}\n.normal-dim-cube-item {\n  position: relative;\n  margin: 0 0 10px 0;\n}\n.normal-dim-cube-item:first-child:before {\n  display: none;\n}\n.normal-dim-cube-item:before {\n  z-index: -1;\n  position: absolute;\n  top: -20px;\n  left: -18px;\n  content: "";\n  width: 18px;\n  height: 30px;\n  border-left: 1px solid #ccc;\n  border-bottom: 1px solid #ccc;\n  line-height: 0;\n}\n.normal-dim-delete {\n  padding: 0 5px;\n  margin: 0 3px 0 0;\n  border: 1px solid #ccc;\n  font-size: 14px;\n  color: #666;\n  cursor: pointer;\n}\n.normal-dim-add {\n  padding: 0 3px;\n  margin: 0 3px 0 0;\n  border: 1px solid #ccc;\n  font-size: 14px;\n  color: #666;\n  cursor: pointer;\n}\n.normal-dim-prompt {\n  float: left;\n  margin: 15px 0;\n  height: 15px;\n  text-align: left;\n}\n',""])},352:function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(e,"__esModule",{value:!0});var o=t(346),r=i(o),a=t(353),l=i(a);t(354),e["default"]={template:l["default"],props:["dims","relation-tables","cubes","relation-table-dims"],data:function(){return this.format=r["default"].date.format,{granularity:r["default"].date.granularity,dateRelationTables:r["default"].date.relationTables}},methods:{changeRelationTable:function(n){n.currDim=n.field=n.format="-1",n.formats=[]},changeCube:function(n,e){var t=e.find(function(e){return e.belong===n.guid});t&&(t.belong=null);var i=e.find(function(e){return e.name===n.currDim});i&&(i.belong=n.guid)},changeField:function(n){n.format=-1,n.formats=this.format[n.field]}},filters:{belong:function(n,e){return n.filter(function(n){return n.belong===e||null===n.belong})}}},n.exports=e["default"]},353:function(n,e){n.exports='<div class="date-dim">\n    <ul class="date-dim-config-item-caption">\n        <li class="date-dim-caption-main-tab">主数据表</li>\n        <li class="date-dim-caption-config-region">配置区</li>\n    </ul>\n    <div class="dim-common-config-each-item" v-for="dim in dims">\n        <span class="dim-common-config-main-tab-name" :title="dim.name">{{dim.name}}</span>\n        <div class="date-dim-config-region" v-for="child in dim.children">\n            <div class="date-dim-setting-item date-dim-relation-tab">\n                <span class="dim-common-config-label">选择被关联表</span>\n                <select class="dim-common-config-select" v-model="child.relationTable" @change="changeRelationTable(child)">\n                    <option value="-1">请选择</option>\n                    <option v-for="item in dateRelationTables" :value="item.value">\n                        {{item.name}}\n                    </option>\n                </select>\n            </div>\n            <div class="date-dim-setting-item date-dim-relation-field">\n                <span class="dim-common-config-label">选择时间字段</span>\n                <select class="dim-common-config-select" v-model="child.currDim" @change="changeCube(child, cubes[dim.cubeId].currDims)">\n                    <option value="-1">请选择</option>\n                    <option  v-for="cube in cubes[dim.cubeId].currDims | belong child.guid" :value="cube.id">\n                        {{cube.comment}}\n                    </option>\n                </select>\n                <span class="dim-common-config-label">粒度</span>\n                <select class="dim-common-config-select" v-model="child.field" @change="changeField(child)">\n                    <option value="-1">请选择</option>\n                    <option v-for="item in granularity" :value="item.value">\n                        {{item.name}}\n                    </option>\n                </select>\n                <span class="dim-common-config-label">时间格式</span>\n                <select class="dim-common-config-select" v-model="child.format">\n                    <option value="-1">请选择</option>\n                    <option v-for="item in child.formats" :value="item.value">\n                        {{item.name}}\n                    </option>\n                </select>\n            </div>\n        </div>\n        <p class="dim-common-config-error" v-show="dim.errorInfo">{{dim.errorInfo}}</p>\n    </div>\n</div>\n'},354:function(n,e,t){var i=t(355);"string"==typeof i&&(i=[[n.id,i,""]]);t(244)(i,{});i.locals&&(n.exports=i.locals)},355:function(n,e,t){e=n.exports=t(243)(),e.push([n.id,'.clearfix {\n  *zoom: 1;\n  /* for IE 6/7 */\n}\n.clearfix:before,\n.clearfix:after {\n  display: table;\n  content: "";\n  line-height: 0;\n  /* for Opera */\n}\n.clearfix:after {\n  clear: both;\n}\n.date-dim-config-item-caption {\n  height: 25px;\n  line-height: 25px;\n  border-bottom: 2px solid #3398cc;\n}\n.date-dim-config-item-caption li {\n  float: left;\n  font-size: 12px;\n  font-weight: 700;\n  text-align: center;\n}\n.date-dim-caption-main-tab {\n  width: 170px;\n}\n.date-dim-caption-config-region {\n  width: 530px;\n}\n.date-dim-config-region {\n  position: relative;\n  float: left;\n  width: 486px;\n  padding: 10px;\n  margin: 0 0 0 30px;\n  border: 1px solid #5a9fa7;\n}\n.date-dim-config-region:before {\n  position: absolute;\n  top: -18px;\n  left: -31px;\n  content: "";\n  width: 30px;\n  height: 30px;\n  border-bottom: 1px solid #ccc;\n  line-height: 0;\n}\n.date-dim-setting-item {\n  height: 24px;\n  line-height: 24px;\n}\n.date-dim-relation-tab {\n  *zoom: 1;\n  /* for IE 6/7 */\n}\n.date-dim-relation-tab:before,\n.date-dim-relation-tab:after {\n  display: table;\n  content: "";\n  line-height: 0;\n  /* for Opera */\n}\n.date-dim-relation-tab:after {\n  clear: both;\n}\n.date-dim-relation-tab select {\n  float: left;\n  width: 150px;\n  height: 24px;\n}\n.date-dim-relation-field {\n  *zoom: 1;\n  /* for IE 6/7 */\n  margin: 10px 0 0 0;\n}\n.date-dim-relation-field:before,\n.date-dim-relation-field:after {\n  display: table;\n  content: "";\n  line-height: 0;\n  /* for Opera */\n}\n.date-dim-relation-field:after {\n  clear: both;\n}\n.date-dim-relation-field select {\n  width: 90px;\n  height: 24px;\n  margin: 0 5px 0 0;\n}\n',""])},356:function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(e,"__esModule",{value:!0});var o=t(246),r=i(o),a=t(357),l=i(a),c=t(345),d=i(c);t(358),e["default"]={template:l["default"],props:["dims","relation-tables","cubes","relation-table-dims"],methods:{addItem:function(n){n.children.push({address:"",currDim:"-1",guid:d["default"].getGuid(),interval:"",refreshType:"1"})},deleteItem:function(n,e){this.$refs.delChild.msg="确定要删除吗？",this.$refs.delChild.show=!0,this.needToDelete={dim:n,child:e}},changeCube:function(n,e){var t=e.find(function(e){return e.belong===n.guid});t&&(t.belong=null);var i=e.find(function(e){return e.name===n.currDim});i&&(i.belong=n.guid)}},filters:{belong:function(n,e){return n.filter(function(n){return n.belong===e||null===n.belong})}},directives:{"can-add-new":{deep:!0,update:function(n){var e=n.currDims,t=n.relationTables,i=n.index,o=n.children;return i!==o.length-1?void(this.el.style.display="none"):t.every(function(n){return null!==n.belong})?void(this.el.style.display="none"):e.every(function(n){return null!==n.belong})?void(this.el.style.display="none"):void(this.el.style.display="")}}},components:{confirm:r["default"]},events:{"confirm-ok":function(){var n=this.needToDelete,e=n.child,t=n.dim;delete this.needToDelete;var i=e.guid,o=this.cubes[t.cubeId].currDims.find(function(n){return n.belong===i});o&&(o.belong=null);var r=this.relationTables.find(function(n){return n.belong===i});r&&(r.belong=null),t.children.length<2?(e.currDim="-1",e.interval=e.address="",e.refreshType=1,e.fields=[]):t.children.$remove(e)}},beforeDestroy:function(){delete this.needToDelete}},n.exports=e["default"]},357:function(n,e){n.exports='<div class="callback-dim">\n    <ul class="callback-dim-config-item-caption">\n        <li class="callback-dim-caption-main-tab">主数据表</li>\n        <li class="callback-dim-caption-config-region">配置区</li>\n    </ul>\n    <div class="dim-common-config-each-item" v-for="dim in dims">\n        <span class="dim-common-config-main-tab-name" :title="dim.name">{{dim.name}}</span>\n        <span\n            :class="{\n                \'dim-common-config-cube-open\': dim.open,\n                \'dim-common-config-cube-close\': !dim.open\n            }"\n            @click="dim.open = !dim.open"></span>\n        <div class="callback-dim-config-region" v-show="dim.open">\n            <div class="callback-dim-config-item" v-for="child in dim.children">\n                <div class="callback-dim-setting-item callback-dim-cb-fields">\n                    <span class="dim-common-config-label">选择回调字段：</span>\n                    <select class="dim-common-config-select" v-model="child.currDim" @change="changeCube(child, cubes[dim.cubeId].currDims)">\n                        <option value="-1">请选择</option>\n                        <option v-for="cube in cubes[dim.cubeId].currDims | belong child.guid" :value="cube.id">\n                            {{cube.comment}}\n                        </option>\n                    </select>\n                </div>\n                <div class="callback-dim-setting-item callback-dim-cb-url">\n                    <span class="dim-common-config-label">填写回调地址：</span>\n                    <input type="text" class="callback-dim-cb-url-input" v-model="child.address">\n                    <span class="callback-dim-cb-url-prompt">例如：http://10.46.133.66:8999/pfplat/callbackmock.action</span>\n                </div>\n                <div class="callback-dim-cache-type">\n                    <span class="dim-common-config-label">选取缓存类型：</span>\n                    <div class="callback-dim-cache-type-item">\n                        <input type="radio" value="1" v-model="child.refreshType">\n                        <label>无需缓存（数据量大，不推荐）</label>\n                        <input type="radio" value="2" v-model="child.refreshType">\n                        <label>在数据刷新后立刻刷新缓存</label>\n                    </div>\n                    <div class="callback-dim-cache-type-item callback-dim-cache-type-item-other-line">\n                        <input type="radio" v-model="child.refreshType" value="3">\n                        <label>间隔</label>\n                        <input type="text" v-model="child.interval" :disabled="+child.refreshType !== 3">\n                        <label>秒刷新一次缓存</label>\n                    </div>\n                </div>\n                <span class="callback-dim-delete" @click="deleteItem(dim, child)">-</span>\n                <span class="callback-dim-add" @click="addItem(dim)" v-can-add-new="{currDims: cubes[dim.cubeId].currDims, relationTables: relationTables, index: $index, children: dim.children}">+</span>\n            </div>\n        </div>\n        <p class="dim-common-config-error" v-show="dim.errorInfo">{{dim.errorInfo}}</p>\n    </div>\n    <confirm v-ref:del-child></confirm>\n</div>\n';
},358:function(n,e,t){var i=t(359);"string"==typeof i&&(i=[[n.id,i,""]]);t(244)(i,{});i.locals&&(n.exports=i.locals)},359:function(n,e,t){e=n.exports=t(243)(),e.push([n.id,'.clearfix {\n  *zoom: 1;\n  /* for IE 6/7 */\n}\n.clearfix:before,\n.clearfix:after {\n  display: table;\n  content: "";\n  line-height: 0;\n  /* for Opera */\n}\n.clearfix:after {\n  clear: both;\n}\n.callback-dim-config-item-caption {\n  height: 25px;\n  line-height: 25px;\n  border-bottom: 2px solid #3398cc;\n}\n.callback-dim-config-item-caption li {\n  float: left;\n  font-size: 12px;\n  font-weight: 700;\n  text-align: center;\n}\n.callback-dim-caption-main-tab {\n  width: 170px;\n}\n.callback-dim-caption-config-region {\n  width: 530px;\n}\n.callback-dim-config-region {\n  float: left;\n}\n.callback-dim-config-item {\n  position: relative;\n  width: 486px;\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: 1px solid #5a9fa7;\n}\n.callback-dim-config-item:first-child:before {\n  display: none;\n}\n.callback-dim-config-item:before {\n  position: absolute;\n  top: -143px;\n  left: -19px;\n  content: "";\n  width: 17px;\n  height: 200px;\n  border-left: 1px solid #ccc;\n  border-bottom: 1px solid #ccc;\n  line-height: 0;\n}\n.callback-dim-setting-item {\n  *zoom: 1;\n  /* for IE 6/7 */\n  height: 24px;\n  line-height: 24px;\n}\n.callback-dim-setting-item:before,\n.callback-dim-setting-item:after {\n  display: table;\n  content: "";\n  line-height: 0;\n  /* for Opera */\n}\n.callback-dim-setting-item:after {\n  clear: both;\n}\n.callback-dim-cb-url {\n  margin: 15px 0 0 0;\n}\n.callback-dim-cb-url-input {\n  float: left;\n  width: 350px;\n  height: 24px;\n  line-height: 24px;\n  border: 1px solid #d9d9d9;\n  border-top-color: #aaaaaa;\n  border-radius: 2px;\n  font-size: 12px;\n  outline: 0 none;\n}\n.callback-dim-cb-url-prompt {\n  float: left;\n  margin: 0 0 0 90px;\n  font-size: 12px;\n  font-weight: 700;\n  color: #d7d7d7;\n}\n.callback-dim-cache-type {\n  *zoom: 1;\n  /* for IE 6/7 */\n  margin: 10px 0 0 0;\n}\n.callback-dim-cache-type:before,\n.callback-dim-cache-type:after {\n  display: table;\n  content: "";\n  line-height: 0;\n  /* for Opera */\n}\n.callback-dim-cache-type:after {\n  clear: both;\n}\n.callback-dim-cache-type-item {\n  float: left;\n}\n.callback-dim-cache-type-item-other-line {\n  margin: 0 0 0 89px;\n}\n.callback-dim-delete,\n.callback-dim-add {\n  position: absolute;\n  top: 130px;\n  border: 1px solid #ccc;\n  font-size: 12px;\n  color: #666;\n  cursor: pointer;\n}\n.callback-dim-delete {\n  right: -26px;\n  padding: 0 7px;\n}\n.callback-dim-add {\n  right: -50px;\n  padding: 0 5px;\n}\n',""])},360:function(n,e,t){var i=t(361);"string"==typeof i&&(i=[[n.id,i,""]]);t(244)(i,{});i.locals&&(n.exports=i.locals)},361:function(n,e,t){e=n.exports=t(243)(),e.push([n.id,'.clearfix {\n  *zoom: 1;\n  /* for IE 6/7 */\n}\n.clearfix:before,\n.clearfix:after {\n  display: table;\n  content: "";\n  line-height: 0;\n  /* for Opera */\n}\n.clearfix:after {\n  clear: both;\n}\n.dim-common-config-each-item {\n  margin: 20px 0 0 0;\n  *zoom: 1;\n  /* for IE 6/7 */\n}\n.dim-common-config-each-item:before,\n.dim-common-config-each-item:after {\n  display: table;\n  content: "";\n  line-height: 0;\n  /* for Opera */\n}\n.dim-common-config-each-item:after {\n  clear: both;\n}\n.dim-common-config-main-tab-name {\n  max-width: 140px;\n  white-space: nowrap;\n  word-wrap: normal;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: inline-block;\n  float: left;\n  width: 140px;\n  height: 25px;\n  padding: 0 5px;\n  border: 1px solid #c5c5c5;\n  line-height: 25px;\n  border-radius: 3px;\n}\n.dim-common-config-cube-open,\n.dim-common-config-cube-close {\n  float: left;\n  width: 35px;\n  height: 15px;\n  margin: 5px 0 0 0;\n  cursor: pointer;\n}\n.dim-common-config-cube-open {\n  background: url('+t(362)+") no-repeat;\n}\n.dim-common-config-cube-close {\n  background: url("+t(363)+') no-repeat;\n}\n.dim-common-config-select {\n  float: left;\n  width: 130px;\n  height: 24px;\n  margin: 0 15px 0 0;\n  border: 1px solid #3398cc;\n}\n.dim-common-config-label {\n  float: left;\n  margin: 0 5px 0 0;\n  font-size: 12px;\n}\n.dim-common-config-error {\n  float: left;\n  margin: 0;\n  color: #f00;\n}\n.dim-config {\n  width: 700px;\n  margin: 100px auto;\n}\n.dim-config-type-list {\n  *zoom: 1;\n  /* for IE 6/7 */\n}\n.dim-config-type-list:before,\n.dim-config-type-list:after {\n  display: table;\n  content: "";\n  line-height: 0;\n  /* for Opera */\n}\n.dim-config-type-list:after {\n  clear: both;\n}\n.dim-config-type-list .list-item {\n  float: left;\n  padding: 4px 10px;\n  margin: 0 10px 0 0;\n  font-size: 14px;\n  font-weight: 700;\n  border-radius: 5px;\n  color: #708ad4;\n  cursor: pointer;\n  border: 2px solid transparent;\n}\n.dim-config-type-list .list-item.active {\n  border: 2px solid #c7d9f1;\n  color: #528cd5;\n  background-color: #dee6f3;\n}\n.dim-config-setting-region {\n  margin: 20px 0 50px;\n}\n.dim-config-operate-btns {\n  text-align: center;\n}\n.dim-config-operate-btns .btn {\n  margin: 0 5px 0;\n  text-decoration: none;\n}\n',""])},362:function(n,e,t){n.exports=t.p+"a0d4a2d115f4aeba68b61f87a8ef14f9.png"},363:function(n,e,t){n.exports=t.p+"a5c40ef959b4f44de16014ece594f0e1.png"}});