webpackJsonp([46],{268:function(t,n,e){t.exports={"default":e(269),__esModule:!0}},269:function(t,n,e){e(270),e(297),t.exports=e(300)},270:function(t,n,e){e(271);var a=e(274);a.NodeList=a.HTMLCollection=a.Array},271:function(t,n,e){"use strict";var a=e(272),r=e(273),o=e(274),s=e(275);t.exports=e(279)(Array,"Array",function(t,n){this._t=s(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,r(1)):"keys"==n?r(0,e):"values"==n?r(0,t[e]):r(0,[e,t[e]])},"values"),o.Arguments=o.Array,a("keys"),a("values"),a("entries")},272:function(t,n){t.exports=function(){}},273:function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},274:function(t,n){t.exports={}},275:function(t,n,e){var a=e(276),r=e(278);t.exports=function(t){return a(r(t))}},276:function(t,n,e){var a=e(277);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==a(t)?t.split(""):Object(t)}},277:function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},278:function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},279:function(t,n,e){"use strict";var a=e(280),r=e(281),o=e(285),s=e(286),i=e(291),c=e(274),d=e(292),u=e(293),l=e(287).getProto,p=e(294)("iterator"),f=!([].keys&&"next"in[].keys()),v="@@iterator",m="keys",h="values",g=function(){return this};t.exports=function(t,n,e,y,b,x,w){d(e,n,y);var A,D,S=function(t){if(!f&&t in P)return P[t];switch(t){case m:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},k=n+" Iterator",_=b==h,I=!1,P=t.prototype,C=P[p]||P[v]||b&&P[b],G=C||S(b);if(C){var O=l(G.call(new t));u(O,k,!0),!a&&i(P,v)&&s(O,p,g),_&&C.name!==h&&(I=!0,G=function(){return C.call(this)})}if(a&&!w||!f&&!I&&P[p]||s(P,p,G),c[n]=G,c[k]=g,b)if(A={values:_?G:S(h),keys:x?G:S(m),entries:_?S("entries"):G},w)for(D in A)D in P||o(P,D,A[D]);else r(r.P+r.F*(f||I),n,A);return A}},280:function(t,n){t.exports=!0},281:function(t,n,e){var a=e(282),r=e(232),o=e(283),s="prototype",i=function(t,n,e){var c,d,u,l=t&i.F,p=t&i.G,f=t&i.S,v=t&i.P,m=t&i.B,h=t&i.W,g=p?r:r[n]||(r[n]={}),y=p?a:f?a[n]:(a[n]||{})[s];p&&(e=n);for(c in e)d=!l&&y&&c in y,d&&c in g||(u=d?y[c]:e[c],g[c]=p&&"function"!=typeof y[c]?e[c]:m&&d?o(u,a):h&&y[c]==u?function(t){var n=function(n){return this instanceof t?new t(n):t(n)};return n[s]=t[s],n}(u):v&&"function"==typeof u?o(Function.call,u):u,v&&((g[s]||(g[s]={}))[c]=u))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,t.exports=i},282:function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},283:function(t,n,e){var a=e(284);t.exports=function(t,n,e){if(a(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,a){return t.call(n,e,a)};case 3:return function(e,a,r){return t.call(n,e,a,r)}}return function(){return t.apply(n,arguments)}}},284:function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},285:function(t,n,e){t.exports=e(286)},286:function(t,n,e){var a=e(287),r=e(288);t.exports=e(289)?function(t,n,e){return a.setDesc(t,n,r(1,e))}:function(t,n,e){return t[n]=e,t}},287:function(t,n){var e=Object;t.exports={create:e.create,getProto:e.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:e.getOwnPropertyDescriptor,setDesc:e.defineProperty,setDescs:e.defineProperties,getKeys:e.keys,getNames:e.getOwnPropertyNames,getSymbols:e.getOwnPropertySymbols,each:[].forEach}},288:function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},289:function(t,n,e){t.exports=!e(290)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},290:function(t,n){t.exports=function(t){try{return!!t()}catch(n){return!0}}},291:function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},292:function(t,n,e){"use strict";var a=e(287),r=e(288),o=e(293),s={};e(286)(s,e(294)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=a.create(s,{next:r(1,e)}),o(t,n+" Iterator")}},293:function(t,n,e){var a=e(287).setDesc,r=e(291),o=e(294)("toStringTag");t.exports=function(t,n,e){t&&!r(t=e?t:t.prototype,o)&&a(t,o,{configurable:!0,value:n})}},294:function(t,n,e){var a=e(295)("wks"),r=e(296),o=e(282).Symbol;t.exports=function(t){return a[t]||(a[t]=o&&o[t]||(o||r)("Symbol."+t))}},295:function(t,n,e){var a=e(282),r="__core-js_shared__",o=a[r]||(a[r]={});t.exports=function(t){return o[t]||(o[t]={})}},296:function(t,n){var e=0,a=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+a).toString(36))}},297:function(t,n,e){"use strict";var a=e(298)(!0);e(279)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=a(n,e),this._i+=t.length,{value:t,done:!1})})},298:function(t,n,e){var a=e(299),r=e(278);t.exports=function(t){return function(n,e){var o,s,i=String(r(n)),c=a(e),d=i.length;return 0>c||c>=d?t?"":void 0:(o=i.charCodeAt(c),55296>o||o>56319||c+1===d||(s=i.charCodeAt(c+1))<56320||s>57343?t?i.charAt(c):o:t?i.slice(c,c+2):(o-55296<<10)+(s-56320)+65536)}}},299:function(t,n){var e=Math.ceil,a=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?a:e)(t)}},300:function(t,n,e){var a=e(301),r=e(303);t.exports=e(232).getIterator=function(t){var n=r(t);if("function"!=typeof n)throw TypeError(t+" is not iterable!");return a(n.call(t))}},301:function(t,n,e){var a=e(302);t.exports=function(t){if(!a(t))throw TypeError(t+" is not an object!");return t}},302:function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},303:function(t,n,e){var a=e(304),r=e(294)("iterator"),o=e(274);t.exports=e(232).getIteratorMethod=function(t){return void 0!=t?t[r]||t["@@iterator"]||o[a(t)]:void 0}},304:function(t,n,e){var a=e(277),r=e(294)("toStringTag"),o="Arguments"==a(function(){return arguments}());t.exports=function(t){var n,e,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=(n=Object(t))[r])?e:o?a(n):"Object"==(s=a(n))&&"function"==typeof n.callee?"Arguments":s}},335:function(t,n,e){t.exports={"default":e(336),__esModule:!0}},336:function(t,n,e){e(337),t.exports=e(232).Object.keys},337:function(t,n,e){var a=e(338);e(339)("keys",function(t){return function(n){return t(a(n))}})},338:function(t,n,e){var a=e(278);t.exports=function(t){return Object(a(t))}},339:function(t,n,e){var a=e(281),r=e(232),o=e(290);t.exports=function(t,n){var e=(r.Object||{})[t]||Object[t],s={};s[t]=n(e),a(a.S+a.F*o(function(){e(1)}),"Object",s)}},1e3:function(t,n,e){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function r(t){this.errDSName=0===t.length}function o(t){var n=/^((http|https):\/\/)?((25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(25[0-5]|2[0-4]\d|[01]?\d\d?):\d{1,5}$/,e=/^((http|https):\/\/)?[0-9a-zA-Z]+[0-9a-zA-Z\.-]*\.[a-zA-Z]{2,4}:\d{1,5}$/;this.errDBAddress=!n.test(t)&&!e.test(t)}function s(t){this.errDBName=0===t.length}function i(t){this.errDBUserName=0===t.length}function c(t){this.errDBPwd=0===t.length}Object.defineProperty(n,"__esModule",{value:!0});var d=e(335),u=a(d),l=e(268),p=a(l),f=e(1001),v=a(f),m=e(1002),h=a(m),g=e(36),y=a(g);e(1003),n["default"]={template:h["default"],data:function(){return{status:0,action:this.$route.params.action,dsGroupList:[],dsConfig:{dsGroupId:"",dsGroupName:"",name:"",type:"MYSQL",hostAndPort:"",standbyHost:[],dbInstance:"",dbUser:"",dbPwd:"",encoding:"",advancedAttr:[],isEncrypt:!0},toggleArrow:!0,toggleEncode:!0,errDSName:!1,errDBAddress:!1,errDBName:!1,errDBUserName:!1,errDBPwd:!1}},created:function(){var t=this;return"unknown"===this.$route.params.dsId?void v["default"].getDsList().then(function(n){t.dsGroupList=n,t.status=1,t.dsConfig.dsGroupId=n[0].id,t.dsConfig.dsGroupName=n[0].name},function(){t.status=2}):void v["default"].getDataSource({dsGroupId:this.$route.params.dsGroupId,dsId:this.$route.params.dsId}).then(function(n){var e=!0,a=!1,r=void 0;try{for(var o,s=(0,p["default"])((0,u["default"])(t.dsConfig));!(e=(o=s.next()).done);e=!0){var i=o.value;t.dsConfig[i]=n[i]}}catch(c){a=!0,r=c}finally{try{!e&&s["return"]&&s["return"]()}finally{if(a)throw r}}t.status=1},function(){t.status=2})},methods:{toggleItem:function(){this.toggleArrow=!this.toggleArrow,this.toggleEncode=!this.toggleEncode},addStandbyDS:function(){this.dsConfig.standbyHost.push("")},delStandbyDS:function(t){this.dsConfig.standbyHost.$remove(t)},addAdvancedAttribute:function(){this.dsConfig.advancedAttr.push({name:"",value:""})},delAdvancedAttribute:function(t){this.dsConfig.advancedAttr.$remove(t)},submitConfig:function(){var t=this,n=y["default"].extend(!0,{},this.dsConfig),e=n.advancedAttr.reduce(function(t,n){return n.name&&n.value?(t[n.name]=n.value,t):t},{});n.advancedProperties=e,r.call(this,n.name),o.call(this,n.hostAndPort),s.call(this,n.dbInstance),i.call(this,n.dbUser),c.call(this,n.dbPwd);var a=["errDSName","errDBAddress","errDBName","errDBUserName","errDBPwd"];a.some(function(n){return t[n]})||v["default"].postDataSource({dsGroupId:n.dsGroupId,dsId:"unknown"===this.$route.params.dsId?"":this.$route.params.dsId,postData:n}).then(function(){location.href="#/dsGroupList/"})},cancelConfig:function(){this.$route.router.go("/dsGroupList/")}}},t.exports=n["default"]},1001:function(t,n,e){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var r=e(230),o=a(r),s=e(335),i=a(s),c=e(268),d=a(c),u=e(36),l=a(u);n["default"]={getDsList:function(){return l["default"].requestGET("dsgroup").then(function(t){return t.data.map(function(t){return{id:t.id,name:t.name}})})},getDataSource:function(t){return l["default"].requestGET("dsgroup/"+t.dsGroupId+"/datasources/"+t.dsId).then(function(t){var n=t.data.ds,e=[],a=!0,r=!1,o=void 0;try{for(var s,c=(0,d["default"])((0,i["default"])(n.properties));!(a=(s=c.next()).done);a=!0){var u=s.value;e.push({name:u,value:n.properties[u]})}}catch(l){r=!0,o=l}finally{try{!a&&c["return"]&&c["return"]()}finally{if(r)throw o}}return n.standbyHost=n.standbyHost||[],n.advancedAttr=e,n.dsGroupId=t.data.id,n.dsGroupName=t.data.name,n.type=n.dataSourceType,n})},postDataSource:function(t){var n=t.postData,e="dsgroup/"+t.dsGroupId+"/datasources/"+t.dsId;return delete n.advancedAttr,delete n.dsGroupId,delete n.dsGroupName,delete n.dsList,n.isEncrypt=!0,n.advancedProperties=(0,o["default"])(n.advancedProperties),l["default"].requestPOST(e,n).then(function(t){return t})}},t.exports=n["default"]},1002:function(t,n){t.exports='<template v-if="status === 0">\n    加载中，请稍后\n</template>\n<template v-if="status === 1">\n    <div class="data-source-edit-region">\n        <ul class="data-source-item-list">\n            <li class="data-source-item">\n                <span class="data-source-item-title">数据源组名称：</span>\n                <div class="data-source-item-value-wrap">\n                    <select class="data-source-item-value" v-if="action === \'add\'">\n                        <option :value="dslist.id" v-for="dslist in dsGroupList" track-by="id">{{dslist.name}}</option>\n                    </select>\n                    <input class="data-source-item-value" type="text" :value="dsConfig.dsGroupName"\n                    v-if="action === \'edit\'" disabled>\n                </div>\n            </li>\n            <li class="data-source-item">\n                <span class="data-source-item-title">数据源名称：</span>\n                <div class="data-source-item-value-wrap">\n                    <input class="data-source-item-value" type="text" v-model="dsConfig.name">\n                    <span class="data-source-item-tip" v-show="errDSName">数据源名称不能为空</span>\n                </div>\n            </li>\n            <li class="data-source-item">\n                <span class="data-source-item-title">数据源类型：</span>\n                <select class="data-source-item-value" v-model="dsConfig.type">\n                    <option value="MYSQL">MySQL</option>\n                    <option value="MySQL-DBPROXY">MySQL-DBPROXY</option>\n                    <option value="HIVE">HIVE</option>\n                    <option value="PALO">PALO</option>\n                    <option value="DRUID">DRUID</option>\n                </select>\n            </li>\n            <li class="data-source-item">\n                <span class="data-source-item-title">数据库地址：</span>\n                <div class="data-source-item-value-wrap">\n                    <input class="data-source-item-value" type="text" placeholder="例如：172.21.217.74:8801 或 a.baidu.com" v-model="dsConfig.hostAndPort">\n                    <span class="data-source-item-tip" v-show="errDBAddress">请输入正确格式的数据库地址(ip+端口 或 域名)</span>\n                </div>\n                <span class="data-source-item-add-standby" @click="addStandbyDS" title="添加备用数据库">+</span>\n            </li>\n            <li class="data-source-item" v-for="standbyhost in dsConfig.standbyHost" track-by="$index">\n                <span class="data-source-item-title">备库地址{{$index + 1}}：</span>\n                <div class="data-source-item-value-wrap">\n                    <input class="data-source-item-value" type="text" placeholder="例如：172.21.217.74:8801 或 a.baidu.com" v-model="standbyhost">\n                </div>\n                <span class="data-source-item-del-standby" title="删除备用数据库" @click="delStandbyDS(standbyhost)">×</span>\n            </li>\n            <li class="data-source-item">\n                <span class="data-source-item-title">数据库：</span>\n                <div class="data-source-item-value-wrap">\n                    <input class="data-source-item-value" type="text" placeholder="请输入数据库名"\n                    v-model="dsConfig.dbInstance">\n                    <span class="data-source-item-tip" v-show="errDBName">数据库不能为空</span>\n                </div>\n            </li>\n            <li class="data-source-item">\n                <span class="data-source-item-title">用户名：</span>\n                <div class="data-source-item-value-wrap">\n                    <input class="data-source-item-value" type="text" placeholder="请输入正确格式的用户名"\n                    v-model="dsConfig.dbUser">\n                    <span class="data-source-item-tip" v-show="errDBUserName">用户名不能为空</span>\n                </div>\n            </li>\n            <li class="data-source-item">\n                <span class="data-source-item-title">密码：</span>\n                <div class="data-source-item-value-wrap">\n                    <input class="data-source-item-value" type="password" placeholder="请输入正确格式的密码"\n                    v-model="dsConfig.dbPwd">\n                    <span class="data-source-item-tip" v-show="errDBPwd">密码不能为空</span>\n                </div>\n            </li>\n            <!-- TODO 这里html结构十分不合理 -->\n            <li class="data-source-item">\n                <a class="data-source-senior-item" href="javascript:void(0);" @click="toggleItem">\n                    高级选项\n                    <span class="data-source-arrow-up"\n                    :class="{\n                        \'data-source-arrow-down\': toggleArrow\n                    }"\n                    ></span>\n                </a>\n            </li>\n            <li class="data-source-item"\n                :class="{\n                    \'data-source-item-toggle\': toggleEncode\n                }">\n                <span class="data-source-item-title">数据库编码：</span>\n                <select class="data-source-item-value" v-model="dsConfig.encoding">\n                    <option value="">请选择</option>\n                    <option value="GBK">GBK</option>\n                    <option value="UTF-8">UTF-8</option>\n                </select>\n            </li>\n            <li class="data-source-item"\n                :class="{\n                    \'data-source-item-toggle\': toggleEncode\n                }">\n                <span class="data-source-item-title">高级属性：</span>\n                <span class="data-source-advancepro-tip">点击"+"添加高级属性</span>\n                <span class="data-source-item-add-standby" @click="addAdvancedAttribute" title="添加高级属性">+</span>\n            </li>\n            <li class="data-source-item"\n                :class="{\n                    \'data-source-item-toggle\': toggleEncode\n                }"\n                v-for="advancedAttr in dsConfig.advancedAttr"\n                track-by="$index"\n            >\n                <div class="data-source-advancepro-wrap">\n                    <span class="data-source-advancepro-title">名称：</span>\n                    <input class="data-source-advancepro-value" type="text" v-model="advancedAttr.name">\n                    <span class="data-source-advancepro-title">属性：</span>\n                    <input class="data-source-advancepro-value" type="text" v-model="advancedAttr.value">\n                </div>\n                <span class="data-source-item-del-standby" title="删除高级属性" @click="delAdvancedAttribute(advancedAttr)">×</span>\n            </li>\n        </ul>\n        <div class="data-source-btn-line">\n            <input class="btn btn-default data-source-btn-cancel" type="button" value="取消" @click="cancelConfig">\n            <input class="btn btn-primary data-source-btn-submit" type="button" value="提交" @click="submitConfig">\n        </div>\n    </div>\n</template>\n<div v-if="status === 2">\n    <p>status:{{status}}，未能查到相关数据，请稍后重试！</p>\n</div>'},1003:function(t,n,e){var a=e(1004);"string"==typeof a&&(a=[[t.id,a,""]]);e(244)(a,{});a.locals&&(t.exports=a.locals)},1004:function(t,n,e){n=t.exports=e(243)(),n.push([t.id,'.data-source-edit-region {\n  width: 525px;\n  margin: 0 auto;\n  font-size: 12px;\n}\n.data-source-item {\n  padding: 12px 0;\n  opacity: 1;\n  -webkit-transition: all .3s;\n  transition: all .3s;\n}\n.data-source-item-title {\n  display: inline-block;\n  width: 98px;\n  height: 20px;\n  line-height: 20px;\n  text-align: left;\n}\n.data-source-item-value-wrap {\n  display: inline-block;\n  position: relative;\n  width: 350px;\n}\n.data-source-item-value {\n  display: inline-block;\n  width: 350px;\n  height: 20px;\n  padding: 0 0 0 2px;\n  border: 1px solid #a3a3a3;\n  line-height: 20px;\n  outline: 0 none;\n}\n.data-source-item-add-standby,\n.data-source-item-del-standby {\n  display: inline-block;\n  padding: 0px 6px;\n  margin: 0 0 0 10px;\n  border: 1px solid #a3a3a3;\n  color: #a3a3a3;\n  font-size: 14px;\n  cursor: pointer;\n  border-radius: 3px;\n}\n.data-source-item-add-standby:hover,\n.data-source-item-del-standby:hover {\n  border: 1px solid #347ee1;\n  color: #fff;\n  background-color: #347ee1;\n}\n.data-source-item-tip {\n  position: absolute;\n  top: 20px;\n  left: 0;\n  color: #F00;\n}\n.data-source-item-toggle {\n  opacity: 0;\n  height: 0;\n  padding: 0;\n  overflow: hidden;\n}\n.data-source-senior-item {\n  color: #0066cc;\n  text-decoration: none;\n}\n.data-source-advancepro-wrap {\n  display: inline-block;\n  margin: 0 0 0 100px;\n}\n.data-source-advancepro-tip {\n  color: #f00;\n}\n.data-source-advancepro-value {\n  display: inline-block;\n  width: 130px;\n  height: 20px;\n  padding: 0 0 0 2px;\n  border: 1px solid #a3a3a3;\n  line-height: 20px;\n  outline: 0 none;\n}\n.data-source-arrow-down,\n.data-source-arrow-up {\n  display: inline-block;\n  position: relative;\n  top: -2px;\n  width: 5px;\n  height: 5px;\n  margin-left: 7px;\n  border-left: 1px solid #0066cc;\n  border-bottom: 1px solid #0066cc;\n}\n.data-source-arrow-up {\n  -webkit-transition: tramsform .3s;\n  transition: tramsform .3s;\n  -webkit-transform: rotate(135deg);\n          transform: rotate(135deg);\n}\n.data-source-arrow-up:after {\n  content: "";\n  display: inline-block;\n  width: 100%;\n  height: 100%;\n  float: left;\n  margin: -3px 0px 0 2px;\n  border-left: 1px solid #0066cc;\n  border-bottom: 1px solid #0066cc;\n}\n.data-source-arrow-down {\n  -webkit-transform: rotate(-45deg);\n          transform: rotate(-45deg);\n}\n.data-source-arrow-down:after {\n  content: "";\n  display: inline-block;\n  width: 100%;\n  height: 100%;\n  float: left;\n  margin: -3px 0px 0 2px;\n  border-left: 1px solid #0066cc;\n  border-bottom: 1px solid #0066cc;\n}\n.data-source-btn-line {\n  margin: 20px 0 0 0;\n  text-align: center;\n}\n.data-source-btn-submit,\n.data-source-btn-cancel {\n  width: 50px;\n  height: 26px;\n  margin: 0 10px;\n  font-size: 14px;\n}\n',""])}});